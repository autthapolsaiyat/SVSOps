server {
  listen 8080;

  # health แบบง่าย (ปิด WAF ที่เส้นนี้แม้อนาคตจะเปิดทั้งเซิร์ฟเวอร์)
  location = /healthz {
    return 200 "ok\n";
  }

  # ระหว่างตั้งระบบ: ให้ตอบ "waf up" เพื่อพิสูจน์ nginx ฟังพอร์ตได้
  # เสร็จแล้วค่อยสลับมา proxy_pass
  location / {
    return 200 "waf up\n";
  }

  # ถ้าจะใช้ proxy ให้แทนบล็อกด้านบนด้วยบล็อกนี้ (เปิดใช้ทีหลัง)
  # location / {
  #   proxy_http_version 1.1;
  #   proxy_set_header Host $host;
  #   proxy_set_header X-Real-IP $remote_addr;
  #   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  #   proxy_set_header X-Forwarded-Proto $scheme;
  #   proxy_read_timeout 60s;
  #   proxy_connect_timeout 5s;
  #   proxy_send_timeout 60s;
  #   proxy_pass http://backend:8000;
  # }
}

